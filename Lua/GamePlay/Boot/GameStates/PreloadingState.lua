---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by shoufeng.zhang.
--- DateTime: 2022/4/28 15:36
---
local ModuleRefer = require("ModuleRefer")
local SdkCrashlytics = require("SdkCrashlytics")

---@type State
local State = require("State")

---@class PreloadingState:State
local PreloadingState = class("PreloadingState", State)

PreloadingState.Name = "PreloadingState"

function PreloadingState:GetName()
    return PreloadingState.Name
end

function PreloadingState:Enter()
    if SdkCrashlytics then
        SdkCrashlytics.RecordCrashlyticsLog("GAME_STATE_MACHINE_[".. tostring(self.Name) .."]_ENTER")
    end
    g_Game.IOAccessRecorder.StartStep("PreloadingState:Enter")
    --require("Initialization").OnGameBoot()
    g_Logger.LogChannel("GameState",'Preloading')

    ModuleRefer.PreloadingModule:Start()
end

function PreloadingState:Exit()
    SdkCrashlytics.RecordLogicVersion()
    collectgarbage()
    CS.System.GC.Collect()
    collectgarbage()
    if SdkCrashlytics then
        SdkCrashlytics.RecordCrashlyticsLog("GAME_STATE_MACHINE_[".. tostring(self.Name) .."]_EXIT")
    end
end

return PreloadingState
