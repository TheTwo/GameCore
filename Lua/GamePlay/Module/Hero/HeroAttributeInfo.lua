---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by shoufeng.zhang.
--- DateTime: 2022/6/19 17:35
---
local ConfigRefer = require('ConfigRefer')
---@class HeroAttributeInfo
---@field New fun(cell:AttrTypeAndValue):HeroAttributeInfo
---@field type number @类型Id@AttrElement
---@field value number
---@field typeInfo AttrTypeConfigCell
---@field SetValue fun(typeId:numbe,valuer:number)
local HeroAttributeInfo = {}
local HeroAttributeInfo_mt = {}

---ctor
---@param cell AttrTypeAndValue
function HeroAttributeInfo.New(cell)
    local o = {}
    setmetatable(o, {__index = HeroAttributeInfo_mt})
    o:Init(cell)
    return o
end

function HeroAttributeInfo.CreateInfo(typeId,value)
    local o = {}
    setmetatable(o, {__index = HeroAttributeInfo_mt})
    o:SetValue(typeId,value)
    return o
end

---@param cell AttrTypeAndValue
function HeroAttributeInfo_mt:Init(cell)
    if not cell then return end
    self.type = cell:TypeId()
    self.value = cell:Value()
    self.typeInfo = ConfigRefer.AttrElement:Find(self.type)
end

function HeroAttributeInfo_mt:Clone(other)
    self.type = other.type
    self.value = other.value
    self.typeInfo = other.typeInfo
end

function HeroAttributeInfo_mt:SetValue(typeId,value)
    self.type = typeId
    self.value = value
    self.typeInfo = ConfigRefer.AttrElement:Find(typeId)
end

function HeroAttributeInfo_mt:__add(other)
    assert(self.type == other.type,'try to add HeroAttributes with different type')
    local res = HeroAttributeInfo.New()
    res:Clone(other)
    res.value = other.value + self.value
    return res
end

return HeroAttributeInfo