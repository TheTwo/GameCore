-- THIS FILE GENERATED BY TOOL, DO NOT MODIFY IT!

---@class EntityEventRegister
local cls = class('EntityEventRegister')

function cls:RegisterAll()
    wds.Alliance.OnNewEntity = self:GetOnNewFunc(wds.Alliance.TypeHash)
    wds.Alliance.OnDestroyEntity = self:GetOnDestroyFunc()
    wds.AllianceMist.OnNewEntity = self:GetOnNewFunc(wds.AllianceMist.TypeHash)
    wds.AllianceMist.OnDestroyEntity = self:GetOnDestroyFunc()
    wds.BehemothCage.OnNewEntity = self:GetOnNewFunc(wds.BehemothCage.TypeHash)
    wds.BehemothCage.OnDestroyEntity = self:GetOnDestroyFunc()
    wds.CastleBrief.OnNewEntity = self:GetOnNewFunc(wds.CastleBrief.TypeHash)
    wds.CastleBrief.OnDestroyEntity = self:GetOnDestroyFunc()
    wds.CommonMapBuilding.OnNewEntity = self:GetOnNewFunc(wds.CommonMapBuilding.TypeHash)
    wds.CommonMapBuilding.OnDestroyEntity = self:GetOnDestroyFunc()
    wds.DefenceTower.OnNewEntity = self:GetOnNewFunc(wds.DefenceTower.TypeHash)
    wds.DefenceTower.OnDestroyEntity = self:GetOnDestroyFunc()
    wds.EnergyTower.OnNewEntity = self:GetOnNewFunc(wds.EnergyTower.TypeHash)
    wds.EnergyTower.OnDestroyEntity = self:GetOnDestroyFunc()
    wds.EventRegion.OnNewEntity = self:GetOnNewFunc(wds.EventRegion.TypeHash)
    wds.EventRegion.OnDestroyEntity = self:GetOnDestroyFunc()
    wds.Expedition.OnNewEntity = self:GetOnNewFunc(wds.Expedition.TypeHash)
    wds.Expedition.OnDestroyEntity = self:GetOnDestroyFunc()
    wds.Explorer.OnNewEntity = self:GetOnNewFunc(wds.Explorer.TypeHash)
    wds.Explorer.OnDestroyEntity = self:GetOnDestroyFunc()
    wds.Facebook.OnNewEntity = self:GetOnNewFunc(wds.Facebook.TypeHash)
    wds.Facebook.OnDestroyEntity = self:GetOnDestroyFunc()
    wds.FakeCastle.OnNewEntity = self:GetOnNewFunc(wds.FakeCastle.TypeHash)
    wds.FakeCastle.OnDestroyEntity = self:GetOnDestroyFunc()
    wds.Helper.OnNewEntity = self:GetOnNewFunc(wds.Helper.TypeHash)
    wds.Helper.OnDestroyEntity = self:GetOnDestroyFunc()
    wds.Hero.OnNewEntity = self:GetOnNewFunc(wds.Hero.TypeHash)
    wds.Hero.OnDestroyEntity = self:GetOnDestroyFunc()
    wds.Kingdom.OnNewEntity = self:GetOnNewFunc(wds.Kingdom.TypeHash)
    wds.Kingdom.OnDestroyEntity = self:GetOnDestroyFunc()
    wds.Lighthouse.OnNewEntity = self:GetOnNewFunc(wds.Lighthouse.TypeHash)
    wds.Lighthouse.OnDestroyEntity = self:GetOnDestroyFunc()
    wds.Login.OnNewEntity = self:GetOnNewFunc(wds.Login.TypeHash)
    wds.Login.OnDestroyEntity = self:GetOnDestroyFunc()
    wds.MapAccount.OnNewEntity = self:GetOnNewFunc(wds.MapAccount.TypeHash)
    wds.MapAccount.OnDestroyEntity = self:GetOnDestroyFunc()
    wds.MapAlliance.OnNewEntity = self:GetOnNewFunc(wds.MapAlliance.TypeHash)
    wds.MapAlliance.OnDestroyEntity = self:GetOnDestroyFunc()
    wds.MapBuilding.OnNewEntity = self:GetOnNewFunc(wds.MapBuilding.TypeHash)
    wds.MapBuilding.OnDestroyEntity = self:GetOnDestroyFunc()
    wds.MapEntityInfos.OnNewEntity = self:GetOnNewFunc(wds.MapEntityInfos.TypeHash)
    wds.MapEntityInfos.OnDestroyEntity = self:GetOnDestroyFunc()
    wds.MapExpedition.OnNewEntity = self:GetOnNewFunc(wds.MapExpedition.TypeHash)
    wds.MapExpedition.OnDestroyEntity = self:GetOnDestroyFunc()
    wds.MapFortress.OnNewEntity = self:GetOnNewFunc(wds.MapFortress.TypeHash)
    wds.MapFortress.OnDestroyEntity = self:GetOnDestroyFunc()
    wds.MapLighthouses.OnNewEntity = self:GetOnNewFunc(wds.MapLighthouses.TypeHash)
    wds.MapLighthouses.OnDestroyEntity = self:GetOnDestroyFunc()
    wds.MapMob.OnNewEntity = self:GetOnNewFunc(wds.MapMob.TypeHash)
    wds.MapMob.OnDestroyEntity = self:GetOnDestroyFunc()
    wds.MapScenes.OnNewEntity = self:GetOnNewFunc(wds.MapScenes.TypeHash)
    wds.MapScenes.OnDestroyEntity = self:GetOnDestroyFunc()
    wds.MapSlgCreeps.OnNewEntity = self:GetOnNewFunc(wds.MapSlgCreeps.TypeHash)
    wds.MapSlgCreeps.OnDestroyEntity = self:GetOnDestroyFunc()
    wds.MapTopList.OnNewEntity = self:GetOnNewFunc(wds.MapTopList.TypeHash)
    wds.MapTopList.OnDestroyEntity = self:GetOnDestroyFunc()
    wds.MapVillages.OnNewEntity = self:GetOnNewFunc(wds.MapVillages.TypeHash)
    wds.MapVillages.OnDestroyEntity = self:GetOnDestroyFunc()
    wds.MobileFortress.OnNewEntity = self:GetOnNewFunc(wds.MobileFortress.TypeHash)
    wds.MobileFortress.OnDestroyEntity = self:GetOnDestroyFunc()
    wds.Monster.OnNewEntity = self:GetOnNewFunc(wds.Monster.TypeHash)
    wds.Monster.OnDestroyEntity = self:GetOnDestroyFunc()
    wds.Pass.OnNewEntity = self:GetOnNewFunc(wds.Pass.TypeHash)
    wds.Pass.OnDestroyEntity = self:GetOnDestroyFunc()
    wds.Player.OnNewEntity = self:GetOnNewFunc(wds.Player.TypeHash)
    wds.Player.OnDestroyEntity = self:GetOnDestroyFunc()
    wds.Puppet.OnNewEntity = self:GetOnNewFunc(wds.Puppet.TypeHash)
    wds.Puppet.OnDestroyEntity = self:GetOnDestroyFunc()
    wds.Rally.OnNewEntity = self:GetOnNewFunc(wds.Rally.TypeHash)
    wds.Rally.OnDestroyEntity = self:GetOnDestroyFunc()
    wds.ReplicaPvp.OnNewEntity = self:GetOnNewFunc(wds.ReplicaPvp.TypeHash)
    wds.ReplicaPvp.OnDestroyEntity = self:GetOnDestroyFunc()
    wds.ResourceField.OnNewEntity = self:GetOnNewFunc(wds.ResourceField.TypeHash)
    wds.ResourceField.OnDestroyEntity = self:GetOnDestroyFunc()
    wds.Scene.OnNewEntity = self:GetOnNewFunc(wds.Scene.TypeHash)
    wds.Scene.OnDestroyEntity = self:GetOnDestroyFunc()
    wds.SceneMember.OnNewEntity = self:GetOnNewFunc(wds.SceneMember.TypeHash)
    wds.SceneMember.OnDestroyEntity = self:GetOnDestroyFunc()
    wds.ScenePlayer.OnNewEntity = self:GetOnNewFunc(wds.ScenePlayer.TypeHash)
    wds.ScenePlayer.OnDestroyEntity = self:GetOnDestroyFunc()
    wds.SeInteractor.OnNewEntity = self:GetOnNewFunc(wds.SeInteractor.TypeHash)
    wds.SeInteractor.OnDestroyEntity = self:GetOnDestroyFunc()
    wds.SePet.OnNewEntity = self:GetOnNewFunc(wds.SePet.TypeHash)
    wds.SePet.OnDestroyEntity = self:GetOnDestroyFunc()
    wds.SeZone.OnNewEntity = self:GetOnNewFunc(wds.SeZone.TypeHash)
    wds.SeZone.OnDestroyEntity = self:GetOnDestroyFunc()
    wds.Shadower.OnNewEntity = self:GetOnNewFunc(wds.Shadower.TypeHash)
    wds.Shadower.OnDestroyEntity = self:GetOnDestroyFunc()
    wds.SlgCreepTumor.OnNewEntity = self:GetOnNewFunc(wds.SlgCreepTumor.TypeHash)
    wds.SlgCreepTumor.OnDestroyEntity = self:GetOnDestroyFunc()
    wds.SlgCreepTumorRemoverBuilding.OnNewEntity = self:GetOnNewFunc(wds.SlgCreepTumorRemoverBuilding.TypeHash)
    wds.SlgCreepTumorRemoverBuilding.OnDestroyEntity = self:GetOnDestroyFunc()
    wds.SlgInteractor.OnNewEntity = self:GetOnNewFunc(wds.SlgInteractor.TypeHash)
    wds.SlgInteractor.OnDestroyEntity = self:GetOnDestroyFunc()
    wds.SlgPuppet.OnNewEntity = self:GetOnNewFunc(wds.SlgPuppet.TypeHash)
    wds.SlgPuppet.OnDestroyEntity = self:GetOnDestroyFunc()
    wds.Spawn.OnNewEntity = self:GetOnNewFunc(wds.Spawn.TypeHash)
    wds.Spawn.OnDestroyEntity = self:GetOnDestroyFunc()
    wds.Team.OnNewEntity = self:GetOnNewFunc(wds.Team.TypeHash)
    wds.Team.OnDestroyEntity = self:GetOnDestroyFunc()
    wds.TopList.OnNewEntity = self:GetOnNewFunc(wds.TopList.TypeHash)
    wds.TopList.OnDestroyEntity = self:GetOnDestroyFunc()
    wds.TransferTower.OnNewEntity = self:GetOnNewFunc(wds.TransferTower.TypeHash)
    wds.TransferTower.OnDestroyEntity = self:GetOnDestroyFunc()
    wds.Troop.OnNewEntity = self:GetOnNewFunc(wds.Troop.TypeHash)
    wds.Troop.OnDestroyEntity = self:GetOnDestroyFunc()
    wds.TroopChariot.OnNewEntity = self:GetOnNewFunc(wds.TroopChariot.TypeHash)
    wds.TroopChariot.OnDestroyEntity = self:GetOnDestroyFunc()
    wds.Village.OnNewEntity = self:GetOnNewFunc(wds.Village.TypeHash)
    wds.Village.OnDestroyEntity = self:GetOnDestroyFunc()
    wds.WorldStatus.OnNewEntity = self:GetOnNewFunc(wds.WorldStatus.TypeHash)
    wds.WorldStatus.OnDestroyEntity = self:GetOnDestroyFunc()
end

local NetEntityTypeToName = require('DBEntityTypeToName')

function cls:ctor()
    self.onNewCallback = nil
    self.OnDestroyCallback = nil
    self:RegisterAll()
end

---@param typeHash number member of NetEntityType
function cls:GetOnNewFunc(typeHash)
    local func = function(entity)
        if self.onNewCallback then
            local name = NetEntityTypeToName[entity.TypeHash]
            local state, result = pcall(self.onNewCallback, name, entity.TypeHash, entity)
            if not state then
                g_Logger.Error(result)
            end
        end
    end
    return func
end

function cls:GetOnDestroyFunc()
    local func = function(entity)
        if self.OnDestroyCallback then
            local name = NetEntityTypeToName[entity.TypeHash]
            local state, result = pcall(self.OnDestroyCallback, name, entity.TypeHash, entity)
            if not state then
                g_Logger.Error(result)
            end
        end
    end
    return func
end

---@param onNewCallback fun(typeName:string, typeHash:number, entity:table):void
---@param onDestroyCallback fun(typeName:string, typeHash:number, entity:table):void
function cls:RegisterNewDestroyCallback(onNewCallback, onDestroyCallback)
    self.onNewCallback = onNewCallback
    self.OnDestroyCallback = onDestroyCallback
end

return cls
