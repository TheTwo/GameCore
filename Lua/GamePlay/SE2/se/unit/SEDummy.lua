---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by BE.Tenner.
--- DateTime: 2021/7/14 16:13
---
--- 单位：Dummy

local SEUnitType = require("SEUnitType")
local SEUnit = require("SEUnit")
--local SEUnitStateType = require("SEUnitStateType")

---@class SEDummy:SEUnit
---@field new fun(manager:SEUnitManager, id:number, data:SEUnitData):SEDummy
---@field super SEUnit
local SEDummy = class("SEDummy",  SEUnit);

---@param self SEDummy
---@param manager SEUnitManager
---@param id number
---@param entity table
---@return void
function SEDummy:ctor(manager, id, entity)
    SEDummy.super.ctor(self, manager, id, SEUnitType.Dummy)

    self._dummyEntity = entity
    ---@type UnityEngine.GameObject
    self._go = CS.UnityEngine.GameObject()
    self._go:SetActive(false)
    self._go.transform:SetParent(self:GetManager():GetEnvironment():GetMapRoot())
    self:SyncGoPosFromEntityPos()
end

---@param self SEDummy
---@return boolean
function SEDummy:IsValid()
    return (self._go)
end

function SEDummy:GetDummyEntity()
    return self._dummyEntity
end

function SEDummy:SyncGoPosFromEntityPos()
    local entity = self:GetDummyEntity()
    local serverPos = CS.UnityEngine.Vector3(entity.MapBasics.Position.X, entity.MapBasics.Position.Y, entity.MapBasics.Position.Z)
    self._go.transform.position = self:GetManager():GetEnvironment():ServerPos2Client(serverPos)
end

---@param self SEDummy
---@return UnityEngine.Vector3
function SEDummy:GetPosition()
    if (self:IsValid()) then
        return self._go.transform.position
    else
        return nil
    end
end

---@param self SEActor
---@return CS.UnityEngine.Transform
function SEDummy:GetTransform()
    return self._go.transform
end

---@param self SEDummy
---@param pos UnityEngine.Vector3
---@return void
function SEDummy:SetPosition(pos)
    if (self:IsValid()) then
        self._go.transform.position = pos
    end
end

---@param self SEDummy
---@return void
function SEDummy:Release()
    SEDummy.super.Release(self)
    CS.UnityEngine.GameObject.Destroy(self._go)
    self._go = nil
end

return SEDummy
