---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by shoufeng.zhang.
--- DateTime: 2022/2/17 21:08
---
local PageBaseState = require('PageBaseState')
---@class PageState_Init : PageBaseState
local PageState_Init = class('PageState_Init',PageBaseState)
local QuestStateConstant = require('QuestStateConstant')
local ModuleRefer = require('ModuleRefer')
local Delegate = require('Delegate')

function PageState_Init:ctor(module,viewer,stateMachine)
    PageBaseState.ctor(self,module,viewer,stateMachine)
	self._questState = -1
end

function PageState_Init.GetName()
	return 'PageState_Init'
end

function PageState_Init:CheckQuestState()	
	if self.module:HasChapterGroupReward() then
		self._questState = 2
	elseif self.module:IsAllChapterFinished() then
		self._questState = 4
	else
		self._questState = 1
	end	
end

function PageState_Init:In()
	self._questState = -1
	self:CheckQuestState()
	if self._questState > 0 then		
		self.fsm:GoNext(false)
	else
		if self.viewer ~= nil then
			self.viewer:ShowPartNormalState()
		end
	end
end


--function PageState_Init:Out(data)
--    
--end

function PageState_Init:Next()
	if self._questState == 1 then
		return QuestStateConstant.StateName.PartNormal
	elseif self._questState == 2 then
		return QuestStateConstant.StateName.GroupComplete
	elseif self._questState == 4 then
		return QuestStateConstant.StateName.AllFinish
	end	
end

return PageState_Init