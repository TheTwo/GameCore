---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by xh.
--- DateTime: 2022/7/22 11:46
---

local BaseUIComponent = require('BaseUIComponent')
local Delegate = require('Delegate')

---@class TouchInfoButtonComponent : BaseUIComponent
local TouchInfoButtonComponent = class("TouchInfoButtonComponent", BaseUIComponent)

function TouchInfoButtonComponent:OnCreate()
    self._p_text_detail = self:Text("p_text")
    self._child_btn_detail = self:Button("p_comp_btn_goto", Delegate.GetOrCreate(self, self.OnClick))
end

---@param data TouchInfoButtonData
function TouchInfoButtonComponent:OnFeedData(data)
    self._p_text_detail.text = data.text
    self.active = true
    self.func = data.func
    self.param = data.param
    if data.enableFunc then
        self.active = data.enableFunc()
    end
end

function TouchInfoButtonComponent:OnClick()
    if self.active and self.func then
        local parentUIMediator = self:GetParentBaseUIMediator()
        if parentUIMediator then
            parentUIMediator:BackToPrevious()
        end
        self.func(self.param)
    end
end

return TouchInfoButtonComponent